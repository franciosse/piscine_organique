{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///media/franciosse/Data/Repos/piscine_organique/app/%5Blocale%5D/components/admin/admin.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst api = {\n  getCourses: async () => await fetch('/api/admin/courses').then(res => res.json()),\n  getChapters: async (courseId: number) => await fetch(`/api/admin/courses/${courseId}/chapters`).then(res => res.json()),\n  getLessons: async (chapterId: number) => await fetch(`/api/admin/chapters/${chapterId}/lessons`).then(res => res.json()),\n  createCourse: async (title: string) => ({ id: Date.now(), title }),\n  createChapter: async (courseId: number, title: string) => ({ id: Date.now(), title, courseId }),\n  createLesson: async (chapterId: number, title: string) => ({ id: Date.now(), title, chapterId }),\n};\n\ninterface AdminCoursesProps {\n  onSelectCourse: (id: number) => void;\n}\n\ninterface Course {\n  id: number;\n  title: string;}\n\ninterface Chapter {\n  id: number;\n  title: string;\n  courseId: number;\n}\n\ninterface Lesson {\n  id: number;\n  title: string;\n  chapterId: number;\n}\n\nexport function AdminCourses({ onSelectCourse }: AdminCoursesProps) {\n  const [courses, setCourses] = useState<Course[]>([]);\n  const [newCourseTitle, setNewCourseTitle] = useState('');\n\n  useEffect(() => {\n    api.getCourses().then(data => setCourses(data.courses || data)); // selon ton API\n  }, []);\n\n  const addCourse = async () => {\n    if (!newCourseTitle.trim()) return;\n    const newCourse = await api.createCourse(newCourseTitle);\n    setCourses((prev) => [...prev, newCourse]);\n    setNewCourseTitle('');\n  };\n\n  return (\n    <div>\n      <h1>Administration des Cours</h1>\n      <ul>\n        {courses.map(course => (\n          <li key={course.id}>\n            <button onClick={() => onSelectCourse(course.id)}>{course.title}</button>\n          </li>\n        ))}\n      </ul>\n      <input\n        type=\"text\"\n        placeholder=\"Nouveau cours\"\n        value={newCourseTitle}\n        onChange={(e) => setNewCourseTitle(e.target.value)}\n      />\n      <button onClick={addCourse}>Ajouter un cours</button>\n    </div>\n  );\n}\n\ninterface AdminChaptersProps {\n  courseId: number;\n  onBack: () => void;\n  onSelectChapter: (id: number) => void;\n}\n\nexport function AdminChapters({ courseId, onBack, onSelectChapter }: AdminChaptersProps) {\n  const [chapters, setChapters] = useState<Chapter[]>([]);\n  const [newChapterTitle, setNewChapterTitle] = useState('');\n\n  useEffect(() => {\n    api.getChapters(courseId).then(data => setChapters(data.chapters || data));\n  }, [courseId]);\n\n  const addChapter = async () => {\n    if (!newChapterTitle.trim()) return;\n    const newChapter = await api.createChapter(courseId, newChapterTitle);\n    setChapters((prev) => [...prev, newChapter]);\n    setNewChapterTitle('');\n  };\n\n  return (\n    <div>\n      <button onClick={onBack}>← Retour aux cours</button>\n      <h2>Chapitres du cours #{courseId}</h2>\n      <ul>\n        {chapters.map((ch) => (\n          <li key={ch.id}>\n            <button onClick={() => onSelectChapter(ch.id)}>{ch.title}</button>\n          </li>\n        ))}\n      </ul>\n      <input\n        type=\"text\"\n        placeholder=\"Nouveau chapitre\"\n        value={newChapterTitle}\n        onChange={(e) => setNewChapterTitle(e.target.value)}\n      />\n      <button onClick={addChapter}>Ajouter un chapitre</button>\n    </div>\n  );\n}\n\ninterface AdminLessonsProps {\n  chapterId: number;\n  onBack: () => void;\n}\n\nexport function AdminLessons({ chapterId, onBack }: AdminLessonsProps) {\n  const [lessons, setLessons] = useState<Lesson[]>([]);\n  const [newLessonTitle, setNewLessonTitle] = useState('');\n\n  useEffect(() => {\n    api.getLessons(chapterId).then(data => setLessons(data.lessons || data));\n  }, [chapterId]);\n\n  const addLesson = async () => {\n    if (!newLessonTitle.trim()) return;\n    const newLesson = await api.createLesson(chapterId, newLessonTitle);\n    setLessons((prev) => [...prev, newLesson]);\n    setNewLessonTitle('');\n  };\n\n  return (\n    <div>\n      <button onClick={onBack}>← Retour aux chapitres</button>\n      <h3>Leçons du chapitre #{chapterId}</h3>\n      <ul>\n        {lessons.map((l) => (\n          <li key={l.id}>{l.title}</li>\n        ))}\n      </ul>\n      <input\n        type=\"text\"\n        placeholder=\"Nouvelle leçon\"\n        value={newLessonTitle}\n        onChange={(e) => setNewLessonTitle(e.target.value)}\n      />\n      <button onClick={addLesson}>Ajouter une leçon</button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///media/franciosse/Data/Repos/piscine_organique/app/%5Blocale%5D/components/admin/coursesList.tsx"],"sourcesContent":["// components/admin/CoursesList.tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { Course } from '@/lib/db/schema';\n\ninterface CourseWithAuthor extends Course {\n  authorName: string;\n  authorEmail: string;\n}\n\nexport default function CoursesList() {\n  const [courses, setCourses] = useState<CourseWithAuthor[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string>('');\n\n  useEffect(() => {\n    fetchCourses();\n  }, []);\n\n  const fetchCourses = async () => {\n    try {\n      const response = await fetch('/api/admin/courses');\n      const data = await response.json();\n      \n      if (response.ok) {\n        setCourses(data.courses);\n      } else {\n        setError(data.error || 'Erreur lors du chargement');\n      }\n    } catch (err) {\n      setError('Erreur de connexion');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteCourse = async (courseId: number) => {\n    if (!confirm('Êtes-vous sûr de vouloir supprimer ce cours ?')) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`/api/admin/courses/${courseId}`, {\n        method: 'DELETE',\n      });\n\n      if (response.ok) {\n        setCourses(courses.filter(course => course.id !== courseId));\n      } else {\n        const data = await response.json();\n        setError(data.error || 'Erreur lors de la suppression');\n      }\n    } catch (err) {\n      setError('Erreur de connexion');\n    }\n  };\n\n  const formatPrice = (priceInCents: number) => {\n    return new Intl.NumberFormat('fr-FR', {\n      style: 'currency',\n      currency: 'EUR',\n    }).format(priceInCents / 100);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Gestion des cours</h1>\n        <Link\n          href=\"/admin/courses/new\"\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          + Nouveau cours\n        </Link>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"bg-white shadow rounded-lg overflow-hidden\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Cours\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Prix\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Statut\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Auteur\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {courses.map((course) => (\n              <tr key={course.id} className=\"hover:bg-gray-50\">\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"flex items-center\">\n                    {course.imageUrl && (\n                      <img\n                        className=\"h-10 w-10 rounded-lg object-cover mr-4\"\n                        src={course.imageUrl}\n                        alt={course.title}\n                      />\n                    )}\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {course.title}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        {course.description?.substring(0, 60)}...\n                      </div>\n                    </div>\n                  </div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  {formatPrice(course.price)}\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                    course.published\n                      ? 'bg-green-100 text-green-800'\n                      : 'bg-gray-100 text-gray-800'\n                  }`}>\n                    {course.published ? 'Publié' : 'Brouillon'}\n                  </span>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  {course.authorName}\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2\">\n                  <Link\n                    href={`/admin/courses/${course.id}`}\n                    className=\"text-blue-600 hover:text-blue-900\"\n                  >\n                    Modifier\n                  </Link>\n                  <button\n                    onClick={() => deleteCourse(course.id)}\n                    className=\"text-red-600 hover:text-red-900\"\n                  >\n                    Supprimer\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        \n        {courses.length === 0 && !loading && (\n          <div className=\"text-center py-12\">\n            <p className=\"text-gray-500 mb-4\">Aucun cours créé pour le moment</p>\n            <Link\n              href=\"/admin/courses/new\"\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              Créer votre premier cours\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 609, "column": 0}, "map": {"version":3,"sources":["file:///media/franciosse/Data/Repos/piscine_organique/app/%5Blocale%5D/components/admin/courseForm.tsx"],"sourcesContent":["\n// components/admin/CourseForm.tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { Course } from '@/lib/db/schema';\n\ninterface CourseFormProps {\n  courseId?: number;\n  initialData?: Course;\n}\n\ninterface FormData {\n  title: string;\n  description: string;\n  price: number;\n  difficultyLevel: 'beginner' | 'intermediate' | 'advanced';\n  estimatedDuration: number;\n  imageUrl: string;\n}\n\nexport default function CourseForm({ courseId, initialData }: CourseFormProps) {\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string>('');\n  const [formData, setFormData] = useState<FormData>({\n    title: initialData?.title || '',\n    description: initialData?.description || '',\n    price: initialData ? initialData.price / 100 : 0,\n    difficultyLevel: initialData?.difficultyLevel as 'beginner' | 'intermediate' | 'advanced' || 'beginner',\n    estimatedDuration: initialData?.estimatedDuration || 0,\n    imageUrl: initialData?.imageUrl || '',\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      const url = courseId ? `/api/admin/courses/${courseId}` : '/api/admin/courses';\n      const method = courseId ? 'PATCH' : 'POST';\n\n      const response = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        router.push('/admin/courses');\n        router.refresh();\n      } else {\n        setError(data.error || 'Erreur lors de la sauvegarde');\n      }\n    } catch (err) {\n      setError('Erreur de connexion');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'number' ? parseFloat(value) || 0 : value,\n    }));\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">\n          {courseId ? 'Modifier le cours' : 'Nouveau cours'}\n        </h1>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-6\">\n          <div>\n            <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Titre du cours *\n            </label>\n            <input\n              type=\"text\"\n              id=\"title\"\n              name=\"title\"\n              value={formData.title}\n              onChange={handleChange}\n              required\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"Ex: Introduction à React\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Description\n            </label>\n            <textarea\n              id=\"description\"\n              name=\"description\"\n              value={formData.description}\n              onChange={handleChange}\n              rows={4}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"Décrivez ce que les étudiants vont apprendre...\"\n            />\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Prix (€) *\n              </label>\n              <input\n                type=\"number\"\n                id=\"price\"\n                name=\"price\"\n                value={formData.price}\n                onChange={handleChange}\n                min=\"0\"\n                step=\"0.01\"\n                required\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"0.00\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"difficultyLevel\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Niveau de difficulté\n              </label>\n              <select\n                id=\"difficultyLevel\"\n                name=\"difficultyLevel\"\n                value={formData.difficultyLevel}\n                onChange={handleChange}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"beginner\">Débutant</option>\n                <option value=\"intermediate\">Intermédiaire</option>\n                <option value=\"advanced\">Avancé</option>\n              </select>\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"estimatedDuration\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Durée estimée (minutes)\n            </label>\n            <input\n              type=\"number\"\n              id=\"estimatedDuration\"\n              name=\"estimatedDuration\"\n              value={formData.estimatedDuration}\n              onChange={handleChange}\n              min=\"0\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"Ex: 120\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"imageUrl\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              URL de l'image de couverture\n            </label>\n            <input\n              type=\"url\"\n              id=\"imageUrl\"\n              name=\"imageUrl\"\n              value={formData.imageUrl}\n              onChange={handleChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"https://example.com/image.jpg\"\n            />\n            {formData.imageUrl && (\n              <div className=\"mt-2\">\n                <img\n                  src={formData.imageUrl}\n                  alt=\"Aperçu\"\n                  className=\"h-32 w-48 object-cover rounded-lg\"\n                  onError={(e) => {\n                    e.currentTarget.style.display = 'none';\n                  }}\n                />\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex justify-end space-x-4 pt-6\">\n            <button\n              type=\"button\"\n              onClick={() => router.back()}\n              className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors\"\n            >\n              Annuler\n            </button>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors\"\n            >\n              {loading ? 'Sauvegarde...' : courseId ? 'Mettre à jour' : 'Créer le cours'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 979, "column": 0}, "map": {"version":3,"sources":["file:///media/franciosse/Data/Repos/piscine_organique/app/%5Blocale%5D/%28dashboard%29/dashboard/admin/page.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { AdminCourses, AdminChapters, AdminLessons } from '@/app/[locale]/components/admin/admin';\nimport CourseEditor from '@/app/[locale]/components/admin/courseEditor';\nimport CoursesList from '@/app/[locale]/components/admin/coursesList';\nimport CourseForm from '@/app/[locale]/components/admin/courseForm';\n\nexport default function AdminPage() {\n  const [selectedCourseId, setSelectedCourseId] = useState<number | null>(null);\n  const [selectedChapterId, setSelectedChapterId] = useState<number | null>(null);\n\n  return (\n    <section className=\"flex-1 p-4 lg:p-8\">\n      <h1 className=\"text-lg lg:text-2xl font-medium text-gray-900 mb-6\">\n        Course Administration\n      </h1>\n        <div>\n        {!selectedCourseId && (\n            <AdminCourses\n            onSelectCourse={(id) => {\n                setSelectedCourseId(id);\n                setSelectedChapterId(null);\n            }}\n            />\n        )}\n\n        {selectedCourseId && !selectedChapterId && (\n            <AdminChapters\n            courseId={selectedCourseId}\n            onBack={() => setSelectedCourseId(null)}\n            onSelectChapter={(id) => setSelectedChapterId(id)}\n            />\n        )}\n\n        {selectedCourseId && selectedChapterId && (\n            <AdminLessons\n            chapterId={selectedChapterId}\n            onBack={() => setSelectedChapterId(null)}\n            />\n        )}\n        </div>\n        <div className=\"mt-8\">\n          <CoursesList></CoursesList>\n          <CourseForm></CourseForm>\n          {/* <CourseEditor courseId={selectedCourseId} /> */}\n\n        </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAEA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACxE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE1E,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAG,WAAU;0BAAqD;;;;;;0BAGjE,8OAAC;;oBACA,CAAC,kCACE,8OAAC,kJAAA,CAAA,eAAY;wBACb,gBAAgB,CAAC;4BACb,oBAAoB;4BACpB,qBAAqB;wBACzB;;;;;;oBAIH,oBAAoB,CAAC,mCAClB,8OAAC,kJAAA,CAAA,gBAAa;wBACd,UAAU;wBACV,QAAQ,IAAM,oBAAoB;wBAClC,iBAAiB,CAAC,KAAO,qBAAqB;;;;;;oBAIjD,oBAAoB,mCACjB,8OAAC,kJAAA,CAAA,eAAY;wBACb,WAAW;wBACX,QAAQ,IAAM,qBAAqB;;;;;;;;;;;;0BAIvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,wJAAA,CAAA,UAAW;;;;;kCACZ,8OAAC,uJAAA,CAAA,UAAU;;;;;;;;;;;;;;;;;AAMrB","debugId":null}}]
}
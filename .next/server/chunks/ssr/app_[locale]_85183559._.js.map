{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///media/franciosse/Data/Repos/piscine_organique/app/%5Blocale%5D/components/admin/courses/coursesList.tsx"],"sourcesContent":["// components/admin/CoursesList.tsx\n'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { Course } from '@/lib/db/schema';\n\ninterface CourseWithAuthor extends Course {\n  authorName: string;\n  authorEmail: string;\n}\n\nexport default function CoursesList() {\n  const [courses, setCourses] = useState<CourseWithAuthor[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string>('');\n\n  useEffect(() => {\n    fetchCourses();\n  }, []);\n\n  const fetchCourses = async () => {\n    try {\n      const response = await fetch('/api/admin/courses');\n      const data = await response.json();\n      \n      if (response.ok) {\n        setCourses(data.courses);\n      } else {\n        setError(data.error || 'Erreur lors du chargement');\n      }\n    } catch (err) {\n      setError('Erreur de connexion');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteCourse = async (courseId: number) => {\n    if (!confirm('Êtes-vous sûr de vouloir supprimer ce cours ?')) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`/api/admin/courses/${courseId}`, {\n        method: 'DELETE',\n      });\n\n      if (response.ok) {\n        setCourses(courses.filter(course => course.id !== courseId));\n      } else {\n        const data = await response.json();\n        setError(data.error || 'Erreur lors de la suppression');\n      }\n    } catch (err) {\n      setError('Erreur de connexion');\n    }\n  };\n\n  const formatPrice = (priceInCents: number) => {\n    return new Intl.NumberFormat('fr-FR', {\n      style: 'currency',\n      currency: 'EUR',\n    }).format(priceInCents / 100);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Gestion des cours</h1>\n        <Link\n          href=\"/dashboard/admin/courses/new\"\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          + Nouveau cours\n        </Link>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n          {error}\n        </div>\n      )}\n\n      <div className=\"bg-white shadow rounded-lg overflow-hidden\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Cours\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Prix\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Statut\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Auteur\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {courses.map((course) => (\n              <tr key={course.id} className=\"hover:bg-gray-50\">\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"flex items-center\">\n                    {course.imageUrl && (\n                      <img\n                        className=\"h-10 w-10 rounded-lg object-cover mr-4\"\n                        src={course.imageUrl}\n                        alt={course.title}\n                      />\n                    )}\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {course.title}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        {course.description?.substring(0, 60)}...\n                      </div>\n                    </div>\n                  </div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  {formatPrice(course.price)}\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                    course.published\n                      ? 'bg-green-100 text-green-800'\n                      : 'bg-gray-100 text-gray-800'\n                  }`}>\n                    {course.published ? 'Publié' : 'Brouillon'}\n                  </span>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  {course.authorName}\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2\">\n                  <Link\n                    href={`/dashboard/admin/courses/${course.id}`}\n                    className=\"text-blue-600 hover:text-blue-900\"\n                  >\n                    Modifier\n                  </Link>\n                  <button\n                    onClick={() => deleteCourse(course.id)}\n                    className=\"text-red-600 hover:text-red-900\"\n                  >\n                    Supprimer\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        \n        {courses.length === 0 && !loading && (\n          <div className=\"text-center py-12\">\n            <p className=\"text-gray-500 mb-4\">Aucun cours créé pour le moment</p>\n            <Link\n              href=\"/dashboard/admin/courses/new\"\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              Créer votre premier cours\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":["file:///media/franciosse/Data/Repos/piscine_organique/app/%5Blocale%5D/%28dashboard%29/dashboard/admin/page.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport CoursesList from '@/app/[locale]/components/admin/courses/coursesList';\n\nexport default function AdminPage() {\n\n  return (\n    <section className=\"flex-1 p-4 lg:p-8\">\n      <h1 className=\"text-lg lg:text-2xl font-medium text-gray-900 mb-6\">\n        Course Administration\n      </h1>\n\n        <div className=\"mt-8\">\n          <CoursesList></CoursesList>\n        </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIe,SAAS;IAEtB,qBACE,6XAAC;QAAQ,WAAU;;0BACjB,6XAAC;gBAAG,WAAU;0BAAqD;;;;;;0BAIjE,6XAAC;gBAAI,WAAU;0BACb,cAAA,6XAAC,mKAAA,CAAA,UAAW;;;;;;;;;;;;;;;;AAItB","debugId":null}}]
}